{"ast":null,"code":"import _regeneratorRuntime from \"/home/aely/gli/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/aely/gli/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/aely/gli/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/aely/gli/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/aely/gli/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/aely/gli/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/aely/gli/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/aely/gli/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/aely/gli/src/Components/NewMod.js\";\nimport React, { Component } from 'react';\nimport { Form, FormGroup, Col, Row, Label, Input, FormText, Button } from 'reactstrap';\nimport Strapi from 'strapi-sdk-javascript/build/main';\nimport { Editor } from 'react-draft-wysiwyg';\nimport { EditorState, convertToRaw, ContentState } from 'draft-js';\nimport htmlToDraft from 'html-to-draftjs';\nimport draftToHtml from 'draftjs-to-html';\nvar apiUrl = process.env.API_URL || 'http://localhost:1337';\nvar strapi = new Strapi(apiUrl);\n\nvar NewMod =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(NewMod, _Component);\n\n  function NewMod(props) {\n    var _this;\n\n    _classCallCheck(this, NewMod);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NewMod).call(this, props));\n    _this.saveChanges =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var _this$state, html, application;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _this$state = _this.state, html = _this$state.html, application = _this$state.application;\n              html = html.replace(/\"/g, '\\'\\'\\'');\n              html = html.replace(/\\\\/g, '----');\n              console.log(html);\n              _context.next = 7;\n              return strapi.request('POST', 'graphql', {\n                data: {\n                  query: \"mutation {\\n                        NewMods(input: {\\n                          where: {\\n                            id: \\\"\".concat(application._id, \"\\\"\\n                          },\\n                          data: {\\n                            howto: \\\"\").concat(html, \"\\\"\\n                          }\\n                        }) {\\n                          application {\\n                            howto\\n                          }\\n                        }\\n                      }\")\n                }\n              });\n\n            case 7:\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this, [[0, 9]]);\n    }));\n\n    _this.onEditorStateChange = function (editorState) {\n      _this.setState({\n        editorState: editorState,\n        html: draftToHtml(convertToRaw(editorState.getCurrentContent())).replace(/[\\n]/g, '')\n      });\n    };\n\n    _this._uploadImageCallBack = function (file) {\n      // long story short, every time we upload an image, we\n      // need to save it to the state so we can get it's data\n      // later when we decide what to do with it.\n      // Make sure you have a uploadImages: [] as your default state\n      var uploadedImages = _this.state.uploadedImages;\n      console.log(uploadedImages);\n      var imageObject = {\n        file: file,\n        localSrc: URL.createObjectURL(file),\n        dburl: \"\".concat(apiUrl, \"/uploads/\").concat(file.name)\n      };\n      uploadedImages.push(imageObject);\n\n      _this.setState({\n        uploadedImages: uploadedImages\n      }); // We need to return a promise with the image src\n      // the img src we will use here will be what's needed\n      // to preview it in the browser. This will be different than what\n      // we will see in the index.md file we generate.\n\n\n      return new Promise(function (resolve, reject) {\n        resolve({\n          data: {\n            link: imageObject.localSrc\n          }\n        });\n      });\n    };\n\n    var _html = '<p>Testing 1234 ðŸ˜€</p>';\n    var contentBlock = htmlToDraft(_html);\n\n    if (contentBlock) {\n      var contentState = ContentState.createFromBlockArray(contentBlock.contentBlocks);\n      var editorState = EditorState.createWithContent(contentState);\n      _this.state = {\n        application: [],\n        submissions: [],\n        loadingItems: true,\n        editorState: editorState,\n        uploadedImages: [],\n        moddetails: '',\n        teststeps: ''\n      };\n      _this._uploadImageCallBack = _this._uploadImageCallBack.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    }\n\n    return _this;\n  }\n\n  _createClass(NewMod, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var response, x, y, contentBlock, contentBlock1, contentState, contentState1, editorState, editorState1;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return strapi.request('POST', '/graphql', {\n                  data: {\n                    query: \"query {\\n                    application (id: \\\"\".concat(this.props.match.params.submissionId, \"\\\") {\\n                    _id\\n                    name\\n                    howto\\n                    mods {\\n                        _id\\n                        title\\n                        moddetails\\n                        trackerid\\n                    }\\n                    submissions {\\n                        _id\\n                        file\\n                        versions {\\n                            _id\\n                            version\\n                        }\\n                        jurisdictions {\\n                            _id\\n                            jurisdiction\\n                            approvalstatuses {\\n                                _id\\n                                status\\n                            }\\n                        }\\n                    }\\n                  }\\n                }\")\n                  }\n                });\n\n              case 3:\n                response = _context2.sent;\n                this.setState({\n                  application: response.data.application,\n                  submissions: response.data.application.submissions,\n                  loadingItems: false\n                });\n                x = this.state.submissions.mods.moddetails.replace(/'''/g, '\"');\n                y = this.state.submissions.mods.teststeps.replace(/'''/g, '\"');\n                contentBlock = htmlToDraft(x.replace(/----/g, '\\\\'));\n                contentBlock1 = htmlToDraft(y.replace(/----/g, '\\\\'));\n\n                if (contentBlock && contentBlock1) {\n                  contentState = ContentState.createFromBlockArray(contentBlock.contentBlocks);\n                  contentState1 = ContentState.createFromBlockArray(contentBlock1.contentBlocks);\n                  editorState = EditorState.createWithContent(contentState);\n                  editorState1 = EditorState.createWithContent(contentState1);\n                  this.setState({\n                    editorState: editorState,\n                    editorState1: editorState1\n                  });\n                }\n\n                _context2.next = 16;\n                break;\n\n              case 12:\n                _context2.prev = 12;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.log(_context2.t0);\n                this.setState({\n                  loadingItems: false\n                });\n\n              case 16:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 12]]);\n      }));\n\n      return function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      };\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state2 = this.state,\n          loadingItems = _this$state2.loadingItems,\n          application = _this$state2.application,\n          submissions = _this$state2.submissions,\n          editorState = _this$state2.editorState;\n      console.log(this.state);\n      return React.createElement(Form, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"exampleEmail\",\n        sm: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, \"Email\"), React.createElement(Col, {\n        sm: 10,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(Input, {\n        type: \"email\",\n        name: \"email\",\n        id: \"exampleEmail\",\n        placeholder: \"with a placeholder\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }))), React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"examplePassword\",\n        sm: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \"Password\"), React.createElement(Col, {\n        sm: 10,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(Input, {\n        type: \"password\",\n        name: \"password\",\n        id: \"examplePassword\",\n        placeholder: \"password placeholder\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }))), React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"exampleSelect\",\n        sm: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, \"Select\"), React.createElement(Col, {\n        sm: 10,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(Input, {\n        type: \"select\",\n        name: \"select\",\n        id: \"exampleSelect\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }))), React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"exampleSelectMulti\",\n        sm: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, \"Select Multiple\"), React.createElement(Col, {\n        sm: 10,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(Input, {\n        type: \"select\",\n        name: \"selectMulti\",\n        id: \"exampleSelectMulti\",\n        multiple: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }))), React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"exampleText\",\n        sm: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, \"Text Area\"), React.createElement(Col, {\n        sm: 10,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(Input, {\n        type: \"textarea\",\n        name: \"text\",\n        id: \"exampleText\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }))), React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"exampleFile\",\n        sm: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, \"File\"), React.createElement(Col, {\n        sm: 10,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(Input, {\n        type: \"file\",\n        name: \"file\",\n        id: \"exampleFile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }), React.createElement(FormText, {\n        color: \"muted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, \"This is some placeholder block-level help text for the above input. It's a bit lighter and easily wraps to a new line.\"))), React.createElement(FormGroup, {\n        tag: \"fieldset\",\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(\"legend\", {\n        className: \"col-form-label col-sm-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, \"Radio Buttons\"), React.createElement(Col, {\n        sm: 10,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        check: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, React.createElement(Label, {\n        check: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, React.createElement(Input, {\n        type: \"radio\",\n        name: \"radio2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }), ' ', \"Option one is this and that\\u2014be sure to include why it's great\")), React.createElement(FormGroup, {\n        check: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }, React.createElement(Label, {\n        check: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(Input, {\n        type: \"radio\",\n        name: \"radio2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }), ' ', \"Option two can be something else and selecting it will deselect option one\")), React.createElement(FormGroup, {\n        check: true,\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, React.createElement(Label, {\n        check: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, React.createElement(Input, {\n        type: \"radio\",\n        name: \"radio2\",\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }), ' ', \"Option three is disabled\")))), React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"checkbox2\",\n        sm: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, \"Checkbox\"), React.createElement(Col, {\n        sm: {\n          size: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        check: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, React.createElement(Label, {\n        check: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      }, React.createElement(Input, {\n        type: \"checkbox\",\n        id: \"checkbox2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }), ' ', \"Check me out\")))), React.createElement(FormGroup, {\n        check: true,\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, React.createElement(Col, {\n        sm: {\n          size: 10,\n          offset: 2\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, React.createElement(Button, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241\n        },\n        __self: this\n      }, \"Submit\"))));\n    }\n  }]);\n\n  return NewMod;\n}(Component);\n\nexport default NewMod;","map":{"version":3,"sources":["/home/aely/gli/src/Components/NewMod.js"],"names":["React","Component","Form","FormGroup","Col","Row","Label","Input","FormText","Button","Strapi","Editor","EditorState","convertToRaw","ContentState","htmlToDraft","draftToHtml","apiUrl","process","env","API_URL","strapi","NewMod","props","saveChanges","state","html","application","replace","console","log","request","data","query","_id","onEditorStateChange","editorState","setState","getCurrentContent","_uploadImageCallBack","file","uploadedImages","imageObject","localSrc","URL","createObjectURL","dburl","name","push","Promise","resolve","reject","link","contentBlock","contentState","createFromBlockArray","contentBlocks","createWithContent","submissions","loadingItems","moddetails","teststeps","bind","match","params","submissionId","response","x","mods","y","contentBlock1","contentState1","editorState1","size","offset"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Form, FormGroup, Col, Row, Label, Input, FormText, Button } from 'reactstrap';\nimport Strapi from 'strapi-sdk-javascript/build/main';\nimport { Editor } from 'react-draft-wysiwyg';\nimport { EditorState, convertToRaw, ContentState } from 'draft-js';\nimport htmlToDraft from 'html-to-draftjs';\nimport draftToHtml from 'draftjs-to-html';\nconst apiUrl = process.env.API_URL || 'http://localhost:1337';\nconst strapi = new Strapi(apiUrl);\n\nclass NewMod extends Component {\n\n    constructor(props) {\n        super(props);\n        let html = '<p>Testing 1234 ðŸ˜€</p>';\n        let contentBlock = htmlToDraft(html);\n        if (contentBlock) {\n            let contentState = ContentState.createFromBlockArray(contentBlock.contentBlocks);\n            let editorState = EditorState.createWithContent(contentState);\n            this.state = {\n                application: [],\n                submissions: [],\n                loadingItems: true,\n                editorState,\n                uploadedImages: [],\n                moddetails: '',\n                teststeps: ''\n            }\n            this._uploadImageCallBack = this._uploadImageCallBack.bind(this);\n        }\n    }\n\n    async componentDidMount() {\n        try {\n            let response = await strapi.request('POST', '/graphql', {\n            data: {\n                query: `query {\n                    application (id: \"${this.props.match.params.submissionId}\") {\n                    _id\n                    name\n                    howto\n                    mods {\n                        _id\n                        title\n                        moddetails\n                        trackerid\n                    }\n                    submissions {\n                        _id\n                        file\n                        versions {\n                            _id\n                            version\n                        }\n                        jurisdictions {\n                            _id\n                            jurisdiction\n                            approvalstatuses {\n                                _id\n                                status\n                            }\n                        }\n                    }\n                  }\n                }`\n            }\n        }\n        );\n        this.setState({\n            application: response.data.application,\n            submissions: response.data.application.submissions,\n            loadingItems: false\n        });\n        let x = this.state.submissions.mods.moddetails.replace(/'''/g, '\"');\n        let y = this.state.submissions.mods.teststeps.replace(/'''/g, '\"');\n        let contentBlock = htmlToDraft(x.replace(/----/g, '\\\\'));\n        let contentBlock1 = htmlToDraft(y.replace(/----/g, '\\\\'));\n        if (contentBlock && contentBlock1) {\n            let contentState = ContentState.createFromBlockArray(contentBlock.contentBlocks);\n            let contentState1 = ContentState.createFromBlockArray(contentBlock1.contentBlocks);\n            let editorState = EditorState.createWithContent(contentState);\n            let editorState1 = EditorState.createWithContent(contentState1);\n            this.setState({\n                editorState,\n                editorState1\n            });\n        }\n        }catch (err) {\n            console.log(err);\n            this.setState({ loadingItems: false });\n        }\n    }\n\n    saveChanges =  async () => {\n        try {\n            let { html, application } = this.state;\n            html = html.replace(/\"/g, '\\'\\'\\'');\n            html = html.replace(/\\\\/g, '----')\n            console.log(html);\n            await strapi.request('POST', 'graphql', {\n                data: {\n                    query: `mutation {\n                        NewMods(input: {\n                          where: {\n                            id: \"${application._id}\"\n                          },\n                          data: {\n                            howto: \"${html}\"\n                          }\n                        }) {\n                          application {\n                            howto\n                          }\n                        }\n                      }`\n                }\n            });\n            }catch (err) {\n                console.log(err);\n            }\n        }\n\n    onEditorStateChange = (editorState) => {\n        this.setState({\n            editorState,\n            html: draftToHtml(convertToRaw(editorState.getCurrentContent())).replace(/[\\n]/g, '')\n        });\n    }\n\n    _uploadImageCallBack = (file) => {\n       // long story short, every time we upload an image, we\n       // need to save it to the state so we can get it's data\n       // later when we decide what to do with it.\n    \n       // Make sure you have a uploadImages: [] as your default state\n        let { uploadedImages } = this.state;\n        console.log(uploadedImages);\n        const imageObject = {\n          file: file,\n          localSrc: URL.createObjectURL(file),\n          dburl: `${apiUrl}/uploads/${file.name}`\n        }\n\n        uploadedImages.push(imageObject);\n    \n        this.setState({uploadedImages: uploadedImages})\n    \n        // We need to return a promise with the image src\n        // the img src we will use here will be what's needed\n        // to preview it in the browser. This will be different than what\n        // we will see in the index.md file we generate.\n        return new Promise(\n          (resolve, reject) => {\n            resolve({ data: { link: imageObject.localSrc } });\n          }\n        );\n    }\n\n\n    render() {\n        let { loadingItems, application, submissions, editorState } = this.state;\n        console.log(this.state);\n        return(\n            <Form>\n                <FormGroup row>\n                    <Label for=\"exampleEmail\" sm={2}>Email</Label>\n                    <Col sm={10}>\n                        <Input type=\"email\" name=\"email\" id=\"exampleEmail\" placeholder=\"with a placeholder\" />\n                    </Col>\n                </FormGroup>\n                <FormGroup row>\n                    <Label for=\"examplePassword\" sm={2}>Password</Label>\n                    <Col sm={10}>\n                        <Input type=\"password\" name=\"password\" id=\"examplePassword\" placeholder=\"password placeholder\" />\n                    </Col>\n                </FormGroup>\n                <FormGroup row>\n                    <Label for=\"exampleSelect\" sm={2}>Select</Label>\n                    <Col sm={10}>\n                        <Input type=\"select\" name=\"select\" id=\"exampleSelect\" />\n                    </Col>\n                </FormGroup>\n                <FormGroup row>\n                    <Label for=\"exampleSelectMulti\" sm={2}>Select Multiple</Label>\n                    <Col sm={10}>\n                        <Input type=\"select\" name=\"selectMulti\" id=\"exampleSelectMulti\" multiple />\n                    </Col>\n                </FormGroup>\n                <FormGroup row>\n                    <Label for=\"exampleText\" sm={2}>Text Area</Label>\n                    <Col sm={10}>\n                        <Input type=\"textarea\" name=\"text\" id=\"exampleText\" />\n                    </Col>\n                </FormGroup>\n                <FormGroup row>\n                    <Label for=\"exampleFile\" sm={2}>File</Label>\n                    <Col sm={10}>\n                        <Input type=\"file\" name=\"file\" id=\"exampleFile\" />\n                        <FormText color=\"muted\">\n                            This is some placeholder block-level help text for the above input.\n                            It's a bit lighter and easily wraps to a new line.\n                        </FormText>\n                    </Col>\n                </FormGroup>\n                <FormGroup tag=\"fieldset\" row>\n                    <legend className=\"col-form-label col-sm-2\">Radio Buttons</legend>\n                    <Col sm={10}>\n                        <FormGroup check>\n                            <Label check>\n                                <Input type=\"radio\" name=\"radio2\" />{' '}\n                                Option one is this and thatâ€”be sure to include why it's great\n                            </Label>\n                        </FormGroup>\n                        <FormGroup check>\n                            <Label check>\n                                <Input type=\"radio\" name=\"radio2\" />{' '}\n                                Option two can be something else and selecting it will deselect option one\n                            </Label>\n                        </FormGroup>\n                        <FormGroup check disabled>\n                            <Label check>\n                                <Input type=\"radio\" name=\"radio2\" disabled />{' '}\n                                Option three is disabled\n                            </Label>\n                        </FormGroup>\n                    </Col>\n                </FormGroup>\n                <FormGroup row>\n                    <Label for=\"checkbox2\" sm={2}>Checkbox</Label>\n                    <Col sm={{ size: 10 }}>\n                        <FormGroup check>\n                            <Label check>\n                                <Input type=\"checkbox\" id=\"checkbox2\" />{' '}\n                                Check me out\n                            </Label>\n                        </FormGroup>\n                    </Col>\n                </FormGroup>\n                <FormGroup check row>\n                    <Col sm={{ size: 10, offset: 2 }}>\n                        <Button>Submit</Button>\n                    </Col>\n                </FormGroup>\n            </Form>\n        );\n    }\n}\n\nexport default NewMod;"]},"metadata":{},"sourceType":"module"}